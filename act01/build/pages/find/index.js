/*! Generated by Clam: act01 2016-03-02 17:15:50 */
!function(a,b){var c=function(){this.init()};c.prototype={init:function(){var a=this;a.cacheData(),a.cacheDom(),a.addJuicerHandler(),a.getPosition()},cacheData:function(){var a=this;a.data={},a.data.param={goods_id:Wlib.getRequestParam("goods_id")||2,type:1}},cacheDom:function(){var a=this;a.dom={wrapper:b("#page"),loading:b("#loading"),tpl:b("#tpl")}},renderUI:function(){var a=this;a.dom.wrapper.prepend(juicer(a.dom.tpl.html(),a.data)),a.dom.loading.hide(),b("#or").text("\uffe5"+a.data.data.goods_price),b("#de").text("\uffe5"+a.data.data.goods_dingjin),a.counter(1e3*a.data.data.begin_time,1e3*a.data.data.end_time)},getPosition:function(){function a(){navigator.geolocation?navigator.geolocation.getCurrentPosition(b,c,e):Wlib.tips("\u6ca1\u6709\u5b9a\u4f4d\u5230\u60a8\u7684\u57ce\u5e02\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")}function b(a){d.data.param.latitude=a.coords.latitude,d.data.param.longitude=a.coords.longitude,d.getItems()}function c(){d.getItems(),d.data.param.latitude=0,d.data.param.longitude=0}var d=this,e={timeout:3e3,enableHighAccuracy:!0,maximumAge:5e3};a()},recacheDom:function(){var a=this;a.dom.full=b(".full-img")},bindEvent:function(){var a=this;b(".btn-wrap").on("click",function(){var b=a.data.data.enableDownload;Wlib.downLite(b)})},addJuicerHandler:function(){juicer.register("makeDis",function(a){var b=a.split(/\s{2}/),c=0,d="",e=b.length;for(c=0;e>c;c++)b[c]&&(d=d+"<p>"+b[c]+"</p>");return d}),juicer.register("makeTime",function(a){var b=new Date(1e3*parseInt(a)),c={y:b.getFullYear(),m:b.getMonth()+1,d:b.getDay(),h:b.getHours(),mm:b.getMinutes()+1,s:b.getSeconds()};return c.y+"/"+c.m+"/"+c.d+" "+c.h+":"+c.mm})},counter:function(a,c){function d(a){var b=parseInt(a/1e3/60/60/24,10),c=parseInt(a/1e3/60/60%24,10),d=parseInt(a/1e3/60%60,10),i=parseInt(a/1e3%60,10);e.html(b),f.html(c),g.html(d),h.html(i)}var e=b("#day"),f=b("hour"),g=b("#min"),h=b("#sec");time=c-a,setInterval(function(){time-=1e3,d(time)},1e3)},getItems:function(){function a(a){0===a.code?(b.data.data=a.datas,b.data.data.mark.replace(/\S/g,""),b.renderUI(),b.recacheDom(),b.bindEvent(),console.log(b.data.data)):Wlib.tips(a.message)}var b=this,c=function(a){var b="";for(var c in a)b+=c+"="+a[c]+"&";return b.slice(0,-1)}(b.data.param);Wlib.GetJsonData("goods/goods_info?"+c,a,a)}};new c}(window,$);