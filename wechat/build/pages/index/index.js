/*! Generated by Clam: wechat 2015-12-29 21:06:53 */
!function(a,b){var c=function(){this.init()},d=location.href.split("?")[0];c.prototype={init:function(){var a=this;Wlib.wx.getJS(d,function(){a.cacheData(),a.cacheDom(),a.renderUI(),a.recacheDom(),a.bindEvent(),a.getPosition()})},cacheData:function(){var b=this;b.data={locationId:"1"},b.data.cityList=a.CITYLIST,localStorage.setItem("userId",Wlib.getRequestParam("userId")||"")},cacheDom:function(){var a=this;a.dom={wrapper:b("#page"),loading:b("#loading"),tpl:b("#tpl")}},renderUI:function(){var a=this;a.dom.wrapper.html(juicer(a.dom.tpl.html(),a.data)),a.dom.loading.hide()},recacheDom:function(){var a=this;a.dom.banner=b(".banner"),a.dom.doc=b("#docItme"),a.dom.hos=b("#hosItme"),a.dom.person=b(".personal"),a.dom.citySelect=b("select")},bindEvent:function(){var a=this;a.dom.banner.on("click",function(){var a=b(this).attr("data-href");a&&(window.location=a)}),a.dom.doc.on("click",function(){window.location="../../pages/doclist/index.html?locationId="+a.data.locationId}),a.dom.hos.on("click",function(){window.location="../../pages/hoslist/index.html?locationId="+a.data.locationId+"&latitude="+a.data.latitude+"&longitude="+a.data.longitude}),a.dom.person.on("click",function(){var b="http://"+document.domain+"/wechat/pages/person/index.html?locationId="+a.data.locationId;Wlib.forceLogin(b,function(){})}),a.dom.citySelect.on("change",function(){a.data.locationId=b(this).val()}),Wlib.wx.shareTo("\u4f0a\u5065\u5eb7-\u60a8\u8eab\u8fb9\u7684\u5065\u5eb7\u4e13\u5bb6","",d,"/images/about/logo.png")},getPosition:function(){function a(){navigator.geolocation?navigator.geolocation.getCurrentPosition(b):Wlib.tips("\u6ca1\u6709\u5b9a\u4f4d\u5230\u60a8\u7684\u57ce\u5e02\uff0c\u8bf7\u7a0d\u5019\u518d\u8bd5")}function b(a){c.data.latitude=a.coords.latitude,c.data.longitude=a.coords.longitude,Wlib.SendRequestNew("commonQuery","locate",{latitude:a.coords.latitude,longitude:a.coords.longitude},function(a){if(a.value){var b={1:"",2:"",3:"",187:""};a.value.id in b&&c.dom.citySelect.val(a.value.id)}})}var c=this;a()}};new c}(window,$);