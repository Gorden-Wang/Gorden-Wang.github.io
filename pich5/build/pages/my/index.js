/*! Generated by Clam: wechat 2016-02-24 16:07:49 */
!function(a,b){var c=function(){this.init()};c.prototype={init:function(){var a=this;a.addJuicerHandler(),a.cacheData(),a.cacheDom(),a.getAllData(function(){a.renderUI(),a.recacheDom(),a.bindEvent()})},cacheData:function(){var a=this;a.data={}},cacheDom:function(){var a=this;a.dom={wrapper:b("#page"),loading:b("#loading"),tpl:b("#tpl")}},renderUI:function(){var a=this;a.dom.wrapper.html(juicer(a.dom.tpl.html(),a.data)),a._makeFooter(),a.dom.loading.hide()},recacheDom:function(){var a=this;a.dom.newLi=b(".itemli li"),a.dom.wallet=b(".wallet-wrap")},_makeFooter:function(){{var a={classname:"f-5",selected:!0,url:"",id:""};new Wlib.Footer(b("#footer"),a,4)}},addJuicerHandler:function(){juicer.register("getId",function(a){return Wlib.getRequestParam("id",a)}),juicer.register("getType",function(a){var b="";switch(a){case"\u51fa\u552e":b="../../pages/sale/index.html";break;case"\u62cd\u5356":b="../../pages/auction/index.html"}return b}),juicer.register("makePercentage",function(a,b){return a=parseInt(a),b=parseInt(b),a/(a+b)*100+"%"})},bindEvent:function(){var c=this;FastClick.attach(document.body);new Swiper("#pics",{pagination:".swiper-pagination"});Wlib._bindLazyLoad(),c.dom.newLi.on("click",function(){var c=b(this).attr("data-id"),d=b(this).attr("data-url");return c?void(a.location=d+"?id="+c):void Wlib.tips("\u5df2\u7ecf\u4e0b\u67b6")}),c.dom.wallet.on("click",function(){a.location="../../pages/wallet/index.html"}),b(".swiper-slide").on("click",function(){var c=b(this).attr("data-id"),d=(b(this).attr("data-type"),b(this).attr("data-itype"));a.location.href=window.location.protocol+"//"+document.domain+"/index.php?r=default/share/index&id="+c+"&itype="+d}),b(".user-wrapper").on("click",function(){a.location.href="../../pages/myInfo/index.html"})},getAllData:function(a){var b=this;b.getBannerData(function(){b.getUserData(a)})},getUserData:function(a){var b=this;Wlib.SendRequest("default/person/myInfo",{uid:localStorage.getItem("uid"),token:localStorage.getItem("token")},"GET",function(c){b.data.user=c,!b.data.user.logo&&(b.data.user.logo=localStorage.getItem("avatar")),a&&a()})},getBannerData:function(a){var b=this;Wlib.SendRequest("default/person/pushInfo",{},"GET",function(c){b.data.banner=c,a&&a()})}};new c}(window,$);