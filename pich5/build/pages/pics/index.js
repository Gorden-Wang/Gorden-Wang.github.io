/*! Generated by Clam: wechat 2016-04-11 17:51:41 */
!function(a,b){var c=function(){this.init()};c.prototype={init:function(){var a=this;a.addJuicerHandler(),a.cacheData(),a.cacheDom(),a.renderUI(),a.recacheDom(),a.bindEvent(),a.getSaleData(),a.getTopImg()},cacheData:function(){var a=this;a.data={},a.SELTAG=1},cacheDom:function(){var a=this;a.dom={wrapper:b("#page"),loading:b("#loading"),tpl:b("#tpl")}},renderUI:function(){var a=this;a.dom.wrapper.html(juicer(a.dom.tpl.html(),a.data)),a._makeFooter(),a.dom.loading.hide()},recacheDom:function(){var a=this;a.dom.topLi=b(".top-tab li"),a.dom.staLi=b(".sta-tab li"),a.dom.itemLi=b(".list-wrapper li"),a.dom.mainlist=b("#mainList ul")},_makeFooter:function(){{var a={classname:"f-5",selected:!0,url:"",id:""};new Wlib.Footer(b("#footer"),a,4)}},addJuicerHandler:function(){juicer.register("getPic",function(){return localStorage.getItem("")}),juicer.register("makeURL",function(a,b){var c=parseInt(a),d="",e=Wlib.getRequestParam("fid")?"":"&edite=true";switch(c){case 2:d="../../pages/sale/index.html?id="+b+e;break;case 1:d="../../pages/auction/index.html?id="+b+e;break;case 7:d="../../pages/appreciate/index.html?id="+b+e;break;case 6:d="../../pages/identify/index.html?id="+b+e;break;case 3:d="../../pages/text/index.html?id="+b+e}return d})},bindEvent:function(){var c=this;FastClick.attach(document.body),c.dom.topLi.on("click",function(){var a=b(this).hasClass("selected");a||b(this).addClass("selected").siblings().removeClass("selected")}),c.dom.staLi.on("click",function(){var a=b(this).hasClass("selected"),d=parseInt(b(this).attr("data-tag"));if(!a)switch(b(this).addClass("selected").siblings().removeClass("selected"),c.SELTAG=d,c.dom.mainlist.html(""),window.onscroll=null,d){case 1:c.getSaleData();break;case 2:c.getAuctionData();break;case 3:c.getAppreciateData();break;case 4:c.getIdentifyData();break;case 5:c.getTextData()}}),c.dom.itemLi.on("click",function(){a.location="detail.html"})},getTopImg:function(){Wlib.getRequestParam(),Wlib.SendRequest("default/person/personInfo",{fid:Wlib.getRequestParam("fid")||localStorage.getItem("uid")},"GET",function(a){b("#topImg").attr("src",a.visualize)})},getMultiDataDes:function(a){var b=[];for(var c in a)for(var d in a[c])b.push(a[c][d]);return{length:b.length,lastId:b.length-1>0&&b[b.length-1].id}},getSaleData:function(){var a=this;Wlib.SendRequest("default/gallery/sale",{fid:Wlib.getRequestParam("fid")||localStorage.getItem("uid"),token:localStorage.getItem("token"),infoid:0},"GET",function(c){return a.data.list=c,0==c.list.length?void Wlib.tips("\u6ca1\u6709\u66f4\u591a\u6570\u636e"):(a.dom.mainlist.append(juicer(b("#sale-item").html(),{list:c})),Wlib._bindLazyLoad(),void(20==c.list.length&&(a.bindNext(),a.LASTID=c.list[19].id)))})},getAuctionData:function(){var a=this;Wlib.SendRequest("default/gallery/auction",{fid:Wlib.getRequestParam("fid")||localStorage.getItem("uid"),token:localStorage.getItem("token"),infoid:0},"GET",function(c){return a.data.list=c,0==c.list.length?void Wlib.tips("\u6ca1\u6709\u66f4\u591a\u6570\u636e"):(a.dom.mainlist.append(juicer(b("#sale-item").html(),{list:c})),Wlib._bindLazyLoad(),void(20==c.list.length&&(a.bindNext(),a.LASTID=c.list[19].id)))})},getAppreciateData:function(){var a=this;Wlib.SendRequest("default/gallery/appreciate",{fid:Wlib.getRequestParam("fid")||localStorage.getItem("uid"),token:localStorage.getItem("token"),infoid:0},"GET",function(c){return a.data.list=c,0==c.list.length?void Wlib.tips("\u6ca1\u6709\u66f4\u591a\u6570\u636e"):(a.dom.mainlist.append(juicer(b("#sale-item").html(),{list:c})),Wlib._bindLazyLoad(),void(20==c.list.length&&(a.bindNext(),a.LASTID=c.list[19].id)))})},getIdentifyData:function(){var a=this;Wlib.SendRequest("default/gallery/identify",{fid:Wlib.getRequestParam("fid")||localStorage.getItem("uid"),token:localStorage.getItem("token"),infoid:0},"GET",function(c){return a.data.list=c,0==c.list.length?void Wlib.tips("\u6ca1\u6709\u66f4\u591a\u6570\u636e"):(a.dom.mainlist.append(juicer(b("#sale-item").html(),{list:c})),Wlib._bindLazyLoad(),void(20==c.list.length&&(a.bindNext(),a.LASTID=c.list[19].id)))})},getTextData:function(){var a=this;Wlib.SendRequest("default/gallery/webtext",{fid:Wlib.getRequestParam("fid")||localStorage.getItem("uid"),token:localStorage.getItem("token"),infoid:0},"GET",function(c){if(a.data.list=c,0==c.list.length)return void Wlib.tips("\u6ca1\u6709\u66f4\u591a\u6570\u636e");a.dom.mainlist.append(juicer(b("#text-item").html(),{list:c}));var d=a.getMultiDataDes(c.list);20==d.length&&(a.bindNext(),a.LASTID=d.lastId)})},bindNext:function(){var a=this;Wlib._bindScrollTobottom(function(){1==a.SELTAG&&Wlib.SendRequest("default/gallery/sale",{fid:Wlib.getRequestParam("fid")||localStorage.getItem("uid"),token:localStorage.getItem("token"),infoid:a.LASTID},"GET",function(c){a.data.list=c,a.dom.mainlist.append(juicer(b("#sale-item").html(),{list:c})),a.recacheDom(),Wlib._bindLazyLoad(),20==c.list.length&&(a.bindNext(),a.LASTID=c.list[19].id)}),2==a.SELTAG&&Wlib.SendRequest("default/gallery/auction",{fid:Wlib.getRequestParam("fid")||localStorage.getItem("uid"),token:localStorage.getItem("token"),infoid:a.LASTID},"GET",function(c){a.data.list=c,a.dom.mainlist.append(juicer(b("#sale-item").html(),{list:c})),a.recacheDom(),Wlib._bindLazyLoad(),20==c.list.length&&(a.bindNext(),a.LASTID=c.list[19].id)}),3==a.SELTAG&&Wlib.SendRequest("default/gallery/appreciate",{fid:Wlib.getRequestParam("fid")||localStorage.getItem("uid"),token:localStorage.getItem("token"),infoid:a.LASTID},"GET",function(c){a.data.list=c,a.dom.mainlist.append(juicer(b("#sale-item").html(),{list:c})),a.recacheDom(),Wlib._bindLazyLoad(),20==c.list.length&&(a.bindNext(),a.LASTID=c.list[19].id)}),4==a.SELTAG&&Wlib.SendRequest("default/gallery/identify",{fid:Wlib.getRequestParam("fid")||localStorage.getItem("uid"),token:localStorage.getItem("token"),infoid:a.LASTID},"GET",function(c){a.data.list=c,a.dom.mainlist.append(juicer(b("#sale-item").html(),{list:c})),a.recacheDom(),Wlib._bindLazyLoad(),20==c.list.length&&(a.bindNext(),a.LASTID=c.list[19].id)}),5==a.SELTAG&&Wlib.SendRequest("default/gallery/webtext",{fid:Wlib.getRequestParam("fid")||localStorage.getItem("uid"),token:localStorage.getItem("token"),infoid:a.LASTID},"GET",function(c){a.data.list=c,a.dom.mainlist.append(juicer(b("#text-item").html(),{list:c})),a.recacheDom();var d=a.getMultiDataDes(c.list);20==d.length&&(a.bindNext(),a.LASTID=d.lastId)})},!0)}};new c}(window,$);