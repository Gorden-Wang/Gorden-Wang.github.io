/*! Generated by Clam: wechat 2016-05-09 16:25:30 */
!function(a,b){function c(){this.init()}c.prototype={init:function(){var a=this;this.addHelper(),this.cacheData(),this.cacheDom(),this.getBanner(function(){a.renderUI(),a.bindEvent(),a.fetchData()})},cacheData:function(){var a=this;a.data={},a.data.req={type:"",lastid:""}},cacheDom:function(){var b=this;b.dom={wrapper:a("#page"),loading:a("#loading"),tpl:a("#tpl"),tplItem:a("#tplItem"),picli:a("#picli")}},renderUI:function(){var a=this;a.dom.wrapper.html(juicer(a.dom.tpl.html(),a.data)),a.renderItem(),a.dom.loading.hide()},renderItem:function(){var b=this;a(".ul-wrap ul").append(juicer(b.dom.tplItem.html(),b.data))},bindEvent:function(){var b=this;FastClick.attach(document.body);new Swiper("#pics",{pagination:".swiper-pagination",preloadImages:!1,lazyLoading:!0});a(".tabs li").on("click",function(){a(this).hasClass("sel")||(b.data.req.type=a(this).attr("data-type"),b.data.req.lastid="",a(this).addClass("sel").siblings().removeClass("sel"),a(".ul-wrap ul").html(""),b.fetchData())}),Wlib._bindLazyLoad()},addHelper:function(){Date.prototype.Format=function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a},juicer.register("getTime",function(a,b){new Date(1e3*a).Format("yyyy\u5e74MM\u6708dd\u65e5"),new Date(1e3*b).Format("yyyy\u5e74MM\u6708dd\u65e5");return new Date(1e3*a).getFullYear()==new Date(1e3*b).getFullYear()?new Date(1e3*a).Format("yyyy\u5e74MM\u6708dd\u65e5")+"-"+new Date(1e3*b).Format("MM\u6708dd\u65e5"):new Date(1e3*a).Format("yyyy\u5e74MM\u6708dd\u65e5")+"-"+new Date(1e3*b).Format("yyyy\u5e74MM\u6708dd\u65e5")})},fetchData:function(){var a=this;a.SendRequest("default/expo/auctionPrev",a.data.req,"GET",function(b){if(1==b.state){if(0==b.list.length)return void Wlib.tips("\u6682\u65e0\u6570\u636e");15==b.list.length&&(a.data.req.lastid=b.list[14].id),a.data.list=b.list,a.renderItem(),Wlib._bindLazyLoad()}else Wlib.tips("\u7cfb\u7edf\u7e41\u5fd9,\u8bf7\u7a0d\u540e\u518d\u8bd5~")})},getBanner:function(a){var b=this;b.SendRequest("default/expo/applaud",{},"GET",function(c){if(1==c.state){if(0==c.list.length)return;b.data.banner=c.list,a&&a()}else Wlib.tips("\u7cfb\u7edf\u7e41\u5fd9,\u8bf7\u7a0d\u540e\u518d\u8bd5~")})},SendRequest:function(b,c,d,e,f){c=function(a,b){var c="";if("POST"==b)c=a;else for(var d in a)c+=d+"="+a[d]+"&";return c}(c,d);var g="http://wx.talkart.cc/index.php?r=",h={dataType:"JSONP",success:function(a){e&&e(a)},error:function(a){f&&f(a)}};"POST"==d?(h.url=g+b,h.data=c,h.dataType="JSON",h.type="POST",console.log(c),c.toString().indexOf("FormData")>0&&(h.enctype="multipart/form-data",h.cache=!1,h.contentType=!1,h.processData=!1)):h.url=g+b+"&"+c+"callback=?",a.ajax(h)}};new c}($,window);