/*! Generated by Clam: wechat 2016-05-09 16:25:30 */
!function(a,b){var c=function(){var a=this;Wlib.wx.getJSSign("",function(b){Wlib.wx.jsConfig(b,function(){Wlib.wx.hideMenu(),a.init()})})};c.prototype={init:function(){var a=this;a.cacheData(),a.cacheDom(),a.renderUI(),a.recacheDom(),a.bindEvent()},cacheData:function(){var a=this;a.data={}},cacheDom:function(){var a=this;a.dom={wrapper:b("#page"),loading:b("#loading"),tpl:b("#tpl")}},renderUI:function(){var a=this;a.dom.wrapper.html(juicer(a.dom.tpl.html(),a.data)),a.dom.loading.hide()},recacheDom:function(){var a=this;a.dom.input=b("input"),a.dom.next=b("#next"),a.dom.overlay=b(".loverlay"),a.dom.confim=b(".confirm"),a.dom.canl=b(".canl"),a.dom.confirmtel=b("#confirmtel")},bindEvent:function(){var c=this;FastClick.attach(document.body),c.dom.next.on("click",function(){if(b(this).hasClass("enable")){var a=c.dom.input.val();/^1\d{10}$/.test(a)?(c.dom.confirmtel.text(c.dom.input.val()),c.dom.overlay.show()):Wlib.tips("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7")}}),c.dom.confim.on("click",function(){c.sendCode(function(){a.location="./verify.html?tel="+c.dom.input.val()})}),c.dom.canl.on("click",function(){c.dom.overlay.hide()}),c.dom.input.on("input",function(){var a=b(this).val();/^1\d{10}$/.test(a)&&c.dom.next.addClass("enable")})},sendCode:function(a){var b=this,c=(b.dom.input.val(),{phone:b.dom.input.val(),type:5,open_id:localStorage.getItem("openid")});Wlib.SendRequest("default/index/getCode",c,"GET",function(b){0==b.state?Wlib.tips(b.message):(localStorage.setItem("code",b.code),a&&a())})}};new c}(window,$);